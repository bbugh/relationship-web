<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    #controls {
      text-align: center;
      margin: 20px;
    }

    #container {
      width: 100%;
      max-width: 800px;
      height: auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 20px;
      padding: 20px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      background-color: #f9f9f9;
      margin: 20px auto;
      overflow: auto;
    }

    .group {
      width: 150px;
      height: 150px;
      border: 1px dashed #ccc;
      border-radius: 10px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }


    .person {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: #3498db;
      position: absolute;
      text-align: center;
      line-height: 20px;
      color: white;
      font-weight: bold;
    }

    .line {
      position: absolute;
      background-color: rgba(46, 204, 113, 0.7);
      transform-origin: 0 0;
    }
  </style>
</head>

<body>
  <div id="controls">
    <label for="peopleCount">Number of People: </label>
    <select id="peopleCount">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
  </div>
  <div id="container"></div>

  <script>
    const container = document.getElementById('container');
    const peopleCountSelect = document.getElementById('peopleCount');
    const groupSize = 100; // Size of each group box
    const radius = 50; // Radius for dots in each group
    const maxGroupWidth = 4; // Max groups per row

    peopleCountSelect.addEventListener('change', () => {
      drawVisualization(parseInt(peopleCountSelect.value));
    });

    function drawVisualization(count) {
      container.innerHTML = ''; // Clear previous elements
      let groupIndex = 0;

      for (let size = 1; size <= count; size++) {
        const combinations = getCombinations(Array.from({ length: count }, (_, i) => i), size);
        combinations.forEach(comb => {
          drawGroup(comb, groupIndex++, size);
        });
      }
    }

    function drawGroup(indices, index, size) {
      const group = document.createElement('div');
      group.className = 'group';

      container.appendChild(group);

      const points = [];
      indices.forEach((i, idx) => {
        const angle = (idx / indices.length) * 2 * Math.PI;
        const x = groupSize / 2 + radius * Math.cos(angle);
        const y = groupSize / 2 + radius * Math.sin(angle);
        points.push({ x, y });
        createPerson(i, x, y, group);
      });

      if (size > 1) {
        for (let i = 0; i < points.length; i++) {
          for (let j = i + 1; j < points.length; j++) {
            createLine(points[i].x, points[i].y, points[j].x, points[j].y, group);
          }
        }
      }
    }


    function createPerson(index, x, y, container) {
      const person = document.createElement('div');
      person.className = 'person';
      person.textContent = index + 1;
      person.style.left = `${x - 10}px`;
      person.style.top = `${y - 10}px`;
      container.appendChild(person);
    }

    function createLine(x1, y1, x2, y2, container) {
      const line = document.createElement('div');
      line.className = 'line';
      const length = Math.hypot(x2 - x1, y2 - y1);
      const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
      line.style.width = `${length}px`;
      line.style.height = '2px';
      line.style.left = `${x1}px`;
      line.style.top = `${y1}px`;
      line.style.transform = `rotate(${angle}deg)`;
      container.appendChild(line);
    }

    function getCombinations(arr, size) {
      const result = [];
      const f = (prefix = [], arr) => {
        if (prefix.length === size) {
          result.push(prefix);
          return;
        }
        for (let i = 0; i < arr.length; i++) {
          f([...prefix, arr[i]], arr.slice(i + 1));
        }
      };
      f([], arr);
      return result;
    }

    drawVisualization(parseInt(peopleCountSelect.value));
  </script>
</body>

</html>
