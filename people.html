<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        #controls {
            text-align: center;
            margin: 20px;
        }

        #container {
            width: 500px;
            height: 500px;
            position: relative;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            margin: 20px auto;
        }

        .person {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #3498db;
            position: absolute;
            text-align: center;
            line-height: 30px;
            color: white;
            font-weight: bold;
        }

        .line {
            position: absolute;
            background-color: rgba(46, 204, 113, 0.7);
            transform-origin: 0 0;
        }
    </style>
</head>

<body>
    <div id="controls">
        <label for="peopleCount">Number of People: </label>
        <select id="peopleCount">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
    </div>
    <div id="container"></div>

    <script>
        const container = document.getElementById('container');
        const peopleCountSelect = document.getElementById('peopleCount');
        const radius = 200; // Radius for circular arrangement
        const centerX = container.clientWidth / 2;
        const centerY = container.clientHeight / 2;

        peopleCountSelect.addEventListener('change', () => {
            drawVisualization(parseInt(peopleCountSelect.value));
        });

        function createPerson(index, x, y) {
            const person = document.createElement('div');
            person.className = 'person';
            person.textContent = index + 1;
            person.style.left = `${x - 15}px`;
            person.style.top = `${y - 15}px`;
            container.appendChild(person);
        }

        function createLine(x1, y1, x2, y2) {
            const line = document.createElement('div');
            line.className = 'line';
            const length = Math.hypot(x2 - x1, y2 - y1);
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            line.style.width = `${length}px`;
            line.style.height = '3px';
            line.style.left = `${x1}px`;
            line.style.top = `${y1}px`;
            line.style.transform = `rotate(${angle}deg)`;
            container.appendChild(line);
        }

        function drawVisualization(count) {
            container.innerHTML = ''; // Clear previous elements
            const points = [];

            // Calculate positions of people
            for (let i = 0; i < count; i++) {
                const angle = (i / count) * 2 * Math.PI;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                points.push({ x, y });
                createPerson(i, x, y);
            }

            // Self-relationships (tiny loops)
            points.forEach(({ x, y }) => createLine(x, y, x, y));

            // Paired relationships
            for (let i = 0; i < points.length; i++) {
                for (let j = i + 1; j < points.length; j++) {
                    createLine(points[i].x, points[i].y, points[j].x, points[j].y);
                }
            }

            // Group relationships (for all groups larger than pairs)
            if (count > 2) {
                for (let size = 3; size <= count; size++) {
                    drawGroupRelationships(points, size);
                }
            }
        }

        function drawGroupRelationships(points, size) {
            const indices = Array.from({ length: points.length }, (_, i) => i);
            const combinations = getCombinations(indices, size);

            combinations.forEach(comb => {
                for (let i = 0; i < comb.length; i++) {
                    for (let j = i + 1; j < comb.length; j++) {
                        createLine(points[comb[i]].x, points[comb[i]].y, points[comb[j]].x, points[comb[j]].y);
                    }
                }
            });
        }

        function getCombinations(arr, size) {
            const result = [];
            const f = (prefix = [], arr) => {
                if (prefix.length === size) {
                    result.push(prefix);
                    return;
                }
                for (let i = 0; i < arr.length; i++) {
                    f([...prefix, arr[i]], arr.slice(i + 1));
                }
            };
            f([], arr);
            return result;
        }

        drawVisualization(parseInt(peopleCountSelect.value));
    </script>
</body>

</html>
