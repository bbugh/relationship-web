<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    #controls {
      text-align: center;
      margin: 20px;
    }

    #container {
      width: 100%;
      max-width: 800px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 20px;
      padding: 20px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      background-color: #f9f9f9;
      margin: 20px auto;
    }

    canvas {
      width: 150px;
      height: 150px;
      border: 1px dashed #ccc;
      border-radius: 10px;
      background-color: #333;
    }
  </style>
</head>

<body>
  <div id="controls">
    <label for="peopleCount">Number of People: </label>
    <select id="peopleCount">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
  </div>
  <div id="container"></div>

  <script>
    const container = document.getElementById('container');
    const peopleCountSelect = document.getElementById('peopleCount');
    const groupSize = 150;
    const radius = 40;

    peopleCountSelect.addEventListener('change', () => {
      drawVisualization(parseInt(peopleCountSelect.value));
    });

    function drawVisualization(count) {
      container.innerHTML = '';
      for (let size = 1; size <= count; size++) {
        const combinations = getCombinations(Array.from({ length: count }, (_, i) => i), size);
        combinations.forEach(comb => {
          drawGroup(comb);
        });
      }
    }

    function drawGroup(indices) {
      const canvas = document.createElement('canvas');
      canvas.width = groupSize;
      canvas.height = groupSize;
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, groupSize, groupSize);

      const centerX = groupSize / 2;
      const centerY = groupSize / 2;
      const points = [];

      if (indices.length === 1) {
        // Special case for single circle centered in the box
        drawCircle(ctx, centerX, centerY, indices[0] + 1);
      } else {
        indices.forEach((i, idx) => {
          const angle = indices.length === 2
            ? idx * Math.PI // Horizontal for 2 dots
            : (idx / indices.length) * 2 * Math.PI - Math.PI / 2; // Centered for 3+ dots
          const x = centerX + radius * Math.cos(angle);
          const y = centerY + radius * Math.sin(angle);
          points.push({ x, y });
        });

        // Draw lines first (background layer)
        for (let i = 0; i < points.length; i++) {
          for (let j = i + 1; j < points.length; j++) {
            drawLine(ctx, points[i].x, points[i].y, points[j].x, points[j].y);
          }
        }

        // Draw circles on top (foreground layer)
        indices.forEach((i, idx) => {
          drawCircle(ctx, points[idx].x, points[idx].y, i + 1);
        });
      }

      container.appendChild(canvas);
    }

    function drawCircle(ctx, x, y, label) {
      ctx.beginPath();
      ctx.arc(x, y, 15, 0, 2 * Math.PI);
      ctx.fillStyle = '#3498db';
      ctx.fill();
      ctx.fillStyle = 'white';
      ctx.font = 'bold 14px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(label, x, y);
      ctx.closePath();
    }

    function drawLine(ctx, x1, y1, x2, y2) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.strokeStyle = '#2ecc71';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.closePath();
    }

    function getCombinations(arr, size) {
      const result = [];
      const f = (prefix = [], arr) => {
        if (prefix.length === size) {
          result.push(prefix);
          return;
        }
        for (let i = 0; i < arr.length; i++) {
          f([...prefix, arr[i]], arr.slice(i + 1));
        }
      };
      f([], arr);
      return result;
    }

    drawVisualization(parseInt(peopleCountSelect.value));
  </script>
</body>

</html>
